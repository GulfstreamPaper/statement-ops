{% extends "base.html" %}
{% block content %}
  <div class="panel">
    <h2>Edit Customer</h2>
    <form method="post">
      <div class="row">
        <div>
          <label>Customer Name</label>
          <input name="group_name" value="{{ recipient['group_name'] }}" required />
        </div>
        <div>
          <label>Emails (comma separated)</label>
          <input name="email_to" value="{{ recipient['email_to'] }}" required />
        </div>
        <div>
          <label>Terms</label>
          <select name="terms_code">
            {% for code, label in term_options %}
              <option value="{{ code }}" {% if code == recipient['terms_code'] %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label>Frequency</label>
          <select name="frequency">
            <option value="weekly" {% if recipient['frequency'] == 'weekly' %}selected{% endif %}>Weekly</option>
            <option value="biweekly" {% if recipient['frequency'] == 'biweekly' %}selected{% endif %}>Biweekly</option>
            <option value="monthly" {% if recipient['frequency'] == 'monthly' %}selected{% endif %}>Monthly</option>
            <option value="none" {% if recipient['frequency'] == 'none' %}selected{% endif %}>None</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div>
          <label>Day of Week</label>
          <select name="day_of_week">
            {% for idx, name in [(0,'Monday'),(1,'Tuesday'),(2,'Wednesday'),(3,'Thursday'),(4,'Friday'),(5,'Saturday'),(6,'Sunday')] %}
              <option value="{{ idx }}" {% if recipient['day_of_week'] == idx %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
          </select>
        </div>
        <div>
          <label>Day of Month (for monthly)</label>
          <input name="day_of_month" type="number" min="1" max="28" value="{{ recipient['day_of_month'] or 1 }}" />
        </div>
        <div>
          <label>Active</label>
          <input name="active" type="checkbox" {% if recipient['active'] %}checked{% endif %} />
        </div>
      </div>
      <div class="actions">
        <button type="submit">Save Changes</button>
        <a class="button-link" href="{{ url_for('customers') }}">Back</a>
      </div>
    </form>
  </div>
{% endblock %}
